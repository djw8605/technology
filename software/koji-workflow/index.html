



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://opensciencegrid.github.io/technology/software/koji-workflow/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.4">
    
    
      
        <title>Koji Workflow - OSG Technology Area</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#koji-workflow" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://opensciencegrid.github.io/technology/" title="OSG Technology Area" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OSG Technology Area
              </span>
              <span class="md-header-nav__topic">
                Koji Workflow
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/opensciencegrid/technology/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://opensciencegrid.github.io/technology/" title="OSG Technology Area" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    OSG Technology Area
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/opensciencegrid/technology/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Software
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" checked>
    
    <label class="md-nav__link" for="nav-2-1">
      Packaging
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Packaging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../rpm-development-guide/" title="RPM Development Guide" class="md-nav__link">
      RPM Development Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../osg-build-tools/" title="OSG Build Tools" class="md-nav__link">
      OSG Build Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../quilt/" title="Using Quilt" class="md-nav__link">
      Using Quilt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upcoming-to-main/" title="Upcoming to Main" class="md-nav__link">
      Upcoming to Main
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Koji Workflow
      </label>
    
    <a href="./" title="Koji Workflow" class="md-nav__link md-nav__link--active">
      Koji Workflow
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#terminology" title="Terminology" class="md-nav__link">
    Terminology
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-koji" title="Using Koji" class="md-nav__link">
    Using Koji
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-software" title="Required Software" class="md-nav__link">
    Required Software
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#special-instructions-for-uw-madison-csl-machines" title="Special instructions for UW-Madison CSL machines:" class="md-nav__link">
    Special instructions for UW-Madison CSL machines:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtaining-a-login" title="Obtaining a login" class="md-nav__link">
    Obtaining a login
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-certificate-authentication" title="Configuring certificate authentication" class="md-nav__link">
    Configuring certificate authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-new-build" title="Creating a new build" class="md-nav__link">
    Creating a new build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-task-results" title="Build task Results" class="md-nav__link">
    Build task Results
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-find-build-results" title="How to find build results" class="md-nav__link">
    How to find build results
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trying-our-your-build" title="Trying our your build" class="md-nav__link">
    Trying our your build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-get-the-resulting-rpm-into-a-repository" title="How to get the resulting RPM into a repository" class="md-nav__link">
    How to get the resulting RPM into a repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-build-issues" title="Debugging build issues" class="md-nav__link">
    Debugging build issues
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#promoting-builds-from-development-testing" title="Promoting Builds from Development -&gt; Testing" class="md-nav__link">
    Promoting Builds from Development -&gt; Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-osg-promote" title="Using osg-promote" class="md-nav__link">
    Using osg-promote
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-custom-koji-areas" title="Creating custom koji areas" class="md-nav__link">
    Creating custom koji areas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-reading" title="Further reading" class="md-nav__link">
    Further reading
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../create-vo-client/" title="Creating the VO Client Package" class="md-nav__link">
      Creating the VO Client Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../repository-management/" title="Repository Management" class="md-nav__link">
      Repository Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../globus-mass-update-procedure/" title="Globus Mass Update Procedure" class="md-nav__link">
      Globus Mass Update Procedure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resurrecting-epel-packages/" title="Resurrecting Epel Packages" class="md-nav__link">
      Resurrecting Epel Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../koji-mass-rebuilds/" title="Koji Mass Rebuilds" class="md-nav__link">
      Koji Mass Rebuilds
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../development-process/" title="Development Process" class="md-nav__link">
      Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../git-software-development/" title="Git Software Development Process" class="md-nav__link">
      Git Software Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ce-test-scaling/" title="CE Scale Testing" class="md-nav__link">
      CE Scale Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ipv6-testing/" title="IPv6 Testing" class="md-nav__link">
      IPv6 Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/software-support/" title="Software Support" class="md-nav__link">
      Software Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../effort-tracking/" title="Effort Tracking" class="md-nav__link">
      Effort Tracking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../release-planning/" title="Release Planning" class="md-nav__link">
      Release Planning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../new-team-member/" title="New Team Member" class="md-nav__link">
      New Team Member
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Release
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Release
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/cut-sw-release/" title="How to Cut a Release" class="md-nav__link">
      How to Cut a Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/cut-data-release/" title="How to Cut a Data Release" class="md-nav__link">
      How to Cut a Data Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/new-release-series/" title="New Release Series" class="md-nav__link">
      New Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/old-release-removal/" title="Old Release Series Removal" class="md-nav__link">
      Old Release Series Removal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/itb-testing/" title="ITB Prerelease Testing" class="md-nav__link">
      ITB Prerelease Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/empty-pkgs/" title="Empty Packages" class="md-nav__link">
      Empty Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/acceptance-testing/" title="Acceptance Testing" class="md-nav__link">
      Acceptance Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Policy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Policy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/campus-cyberinfrastructure/" title="Campus Cyberinfrastructure" class="md-nav__link">
      Campus Cyberinfrastructure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/cream-support/" title="CREAM-CE Support" class="md-nav__link">
      CREAM-CE Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/service-migrations-spring-2018/" title="Service Migrations - Spring 2018" class="md-nav__link">
      Service Migrations - Spring 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/gums-retire/" title="GUMS Retirement" class="md-nav__link">
      GUMS Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/bestman2-retire/" title="BeStMan2 Retirement" class="md-nav__link">
      BeStMan2 Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/voms-admin-retire/" title="VOMS Admin Retirement" class="md-nav__link">
      VOMS Admin Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/release-series/" title="Release Series Support" class="md-nav__link">
      Release Series Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/globus-toolkit/" title="Globus Toolkit Support" class="md-nav__link">
      Globus Toolkit Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/external-oasis-repos/" title="OASIS Repository Mirroring" class="md-nav__link">
      OASIS Repository Mirroring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/flexible-release-model/" title="Flexible Release Model" class="md-nav__link">
      Flexible Release Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/software-release/" title="Software Release Policy" class="md-nav__link">
      Software Release Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/container-release/" title="Container Release Policy" class="md-nav__link">
      Container Release Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/community-testing/" title="Community Testing" class="md-nav__link">
      Community Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/writing-documentation/" title="Writing Documentation" class="md-nav__link">
      Writing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/reviewing-documentation/" title="Reviewing Documentation" class="md-nav__link">
      Reviewing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/style-guide/" title="Markdown Style Guide" class="md-nav__link">
      Markdown Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/new-doc-area/" title="Creating a New Area" class="md-nav__link">
      Creating a New Area
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Historical Transitions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Historical Transitions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/sha2-support/" title="SHA-2 Support" class="md-nav__link">
      SHA-2 Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/markdown-migration/" title="Migrating Documents to Markdown" class="md-nav__link">
      Migrating Documents to Markdown
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Meetings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Meetings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191202/" title="December, 2 2019" class="md-nav__link">
      December, 2 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191125/" title="November, 25 2019" class="md-nav__link">
      November, 25 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191118/" title="November, 18 2019" class="md-nav__link">
      November, 18 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191111/" title="November, 11 2019" class="md-nav__link">
      November, 11 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191104/" title="November, 4 2019" class="md-nav__link">
      November, 4 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191028/" title="October, 28 2019" class="md-nav__link">
      October, 28 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191021/" title="October, 21 2019" class="md-nav__link">
      October, 21 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191014/" title="October, 14 2019" class="md-nav__link">
      October, 14 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20191007/" title="October, 7 2019" class="md-nav__link">
      October, 7 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190930/" title="September, 30 2019" class="md-nav__link">
      September, 30 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190923/" title="September, 23 2019" class="md-nav__link">
      September, 23 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190916/" title="September, 16 2019" class="md-nav__link">
      September, 16 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190909/" title="September, 9 2019" class="md-nav__link">
      September, 9 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190826/" title="August, 26 2019" class="md-nav__link">
      August, 26 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190819/" title="August, 19 2019" class="md-nav__link">
      August, 19 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190812/" title="August, 12 2019" class="md-nav__link">
      August, 12 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190805/" title="August, 5 2019" class="md-nav__link">
      August, 5 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190729/" title="July 29, 2019" class="md-nav__link">
      July 29, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190722/" title="July 22, 2019" class="md-nav__link">
      July 22, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190708/" title="July 8, 2019" class="md-nav__link">
      July 8, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190701/" title="July 1, 2019" class="md-nav__link">
      July 1, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190624/" title="June 24, 2019" class="md-nav__link">
      June 24, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190617/" title="June 17, 2019" class="md-nav__link">
      June 17, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190610/" title="June 10, 2019" class="md-nav__link">
      June 10, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190603/" title="June 3, 2019" class="md-nav__link">
      June 3, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190528/" title="May 28, 2019" class="md-nav__link">
      May 28, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190513/" title="May 13, 2019" class="md-nav__link">
      May 13, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190506/" title="May 6, 2019" class="md-nav__link">
      May 6, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190429/" title="April 29, 2019" class="md-nav__link">
      April 29, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190422/" title="April 22, 2019" class="md-nav__link">
      April 22, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190415/" title="April 15, 2019" class="md-nav__link">
      April 15, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190408/" title="April 8, 2019" class="md-nav__link">
      April 8, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190401/" title="April 1, 2019" class="md-nav__link">
      April 1, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190325/" title="March 25, 2019" class="md-nav__link">
      March 25, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190311/" title="March 11, 2019" class="md-nav__link">
      March 11, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190304/" title="March 4, 2019" class="md-nav__link">
      March 4, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190225/" title="February 25, 2019" class="md-nav__link">
      February 25, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190218/" title="February 18, 2019" class="md-nav__link">
      February 18, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190211/" title="February 11, 2019" class="md-nav__link">
      February 11, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190204/" title="February 4, 2019" class="md-nav__link">
      February 4, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190128/" title="January 28, 2019" class="md-nav__link">
      January 28, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190122/" title="January 22, 2019" class="md-nav__link">
      January 22, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190114/" title="January 14, 2019" class="md-nav__link">
      January 14, 2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2019/TechArea20190107/" title="January 7, 2019" class="md-nav__link">
      January 7, 2019
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#terminology" title="Terminology" class="md-nav__link">
    Terminology
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-koji" title="Using Koji" class="md-nav__link">
    Using Koji
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-software" title="Required Software" class="md-nav__link">
    Required Software
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#special-instructions-for-uw-madison-csl-machines" title="Special instructions for UW-Madison CSL machines:" class="md-nav__link">
    Special instructions for UW-Madison CSL machines:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtaining-a-login" title="Obtaining a login" class="md-nav__link">
    Obtaining a login
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-certificate-authentication" title="Configuring certificate authentication" class="md-nav__link">
    Configuring certificate authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-new-build" title="Creating a new build" class="md-nav__link">
    Creating a new build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-task-results" title="Build task Results" class="md-nav__link">
    Build task Results
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-find-build-results" title="How to find build results" class="md-nav__link">
    How to find build results
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trying-our-your-build" title="Trying our your build" class="md-nav__link">
    Trying our your build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-get-the-resulting-rpm-into-a-repository" title="How to get the resulting RPM into a repository" class="md-nav__link">
    How to get the resulting RPM into a repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-build-issues" title="Debugging build issues" class="md-nav__link">
    Debugging build issues
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#promoting-builds-from-development-testing" title="Promoting Builds from Development -&gt; Testing" class="md-nav__link">
    Promoting Builds from Development -&gt; Testing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-osg-promote" title="Using osg-promote" class="md-nav__link">
    Using osg-promote
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-custom-koji-areas" title="Creating custom koji areas" class="md-nav__link">
    Creating custom koji areas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-reading" title="Further reading" class="md-nav__link">
    Further reading
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/technology/edit/master/docs/software/koji-workflow.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="koji-workflow">Koji Workflow<a class="headerlink" href="#koji-workflow" title="Permanent link">&para;</a></h1>
<p>This covers the basics of using and understanding the <a href="https://koji.opensciencegrid.org/koji">OSG Koji</a> instance. It is meant primarily for OSG Software team members who need to interact with the service.</p>
<h2 id="terminology">Terminology<a class="headerlink" href="#terminology" title="Permanent link">&para;</a></h2>
<p>Using and understanding the following terminology correctly will help in the reading of this document:</p>
<p><strong>Package</strong><br />
This refers to a named piece of software in the Koji database. An example would be "lcmaps".</p>
<p><strong>Build</strong><br />
A specific version and release of a package, and an associated state. A build state may be successful (and contain RPMs), failed, or in-progress. A given build may be in one or more tags. The build is associated with the output of the latest build task with the same version and release of the package.</p>
<p><strong>Tag</strong><br />
A named set of packages and builds, parent tags, and reference to external repositories. An example would be the "osg-3.3-el6-development" tag, which contains (among others) the "lcmaps" package and the "lcmaps-1.6.6-1.1.osg33.el6" build. There is an inheritance structure to tags: by default, all packages/builds in a parent tag are added to the tag. A tag may contain a reference to (possibly inherited) external repositories; the RPMs in these repositories are added to repositories created from this tag. Examples of referenced external repositories include CentOS base, EPEL, or JPackage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A tag is NOT a yum repository.</p>
</div>
<p><strong>Target</strong><br />
A target consists of a build tag and a destination tag. An example is "osg-3.3-el6", where the build tag is "osg-3.3-el6-build" and the destination tag is "osg-3.3-el6". A target is used by the build task to know what repository to build from and tag to build into.</p>
<p><strong>Task</strong><br />
A unit of work for Koji. Several common tasks are:</p>
<ul>
<li>
<p>build<br />
    This task takes a SRPM and a target, and attempts to create a complete Build in the target's destination tag from the target's build repository. This task will launch one buildArch task for each architecture in the destination tag; if each subtask is successful, then it will launch a tagBuild subtask.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the build task is marked as "scratch", then it won't result in a saved Build.</p>
</div>
</li>
<li>
<p>buildArch<br />
    This task takes a SRPM, architecture name, and a Koji repository as an input, and runs <code>mock</code> to create output RPMs for that arch. The build artifacts are added to the Build if all buildArch tasks are successful.</p>
</li>
<li>
<p>tagBuild<br />
    This adds a successful build to a given tag.</p>
</li>
<li>
<p>newRepo<br />
    This creates a new repository from a given tag.</p>
</li>
</ul>
<p><strong>Build artifacts</strong><br />
The results of a buildArch task. Their metadata are recorded in the Koji database, and files are saved to disk. Metadata may include checksums, timestamps, and who initiated the task. Artifacts may include RPMs, SRPMs, and build logs.</p>
<p><strong>Repository</strong><br />
A yum repository created from the contents of a tag at a specific point in time. By default, the yum repository will contain all successful, non-blocked builds in the tag, plus all RPMs in the external repositories for the tag.</p>
<h2 id="using-koji">Using Koji<a class="headerlink" href="#using-koji" title="Permanent link">&para;</a></h2>
<h3 id="required-software">Required Software<a class="headerlink" href="#required-software" title="Permanent link">&para;</a></h3>
<p>Using Koji requires:</p>
<ul>
<li><code>osg-build</code> version 1.6.3 or later.</li>
<li><code>koji</code> 1.6.0-2.osg or later. <strong>Note</strong> that you want a koji build from osg; the output of <code>rpm -q koji</code> should end in ".osg".</li>
</ul>
<p>Both pieces of software are available from the osg repositories. <code>osg-build</code> may also be obtained from GitHub by cloning out <code>https://github.com/opensciencegrid/osg-build</code></p>
<h4 id="special-instructions-for-uw-madison-csl-machines">Special instructions for UW-Madison CSL machines:<a class="headerlink" href="#special-instructions-for-uw-madison-csl-machines" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Clone the osg-build GitHub repo:</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@host]$</span> git clone https://github.com/opensciencegrid/osg-build
</pre></div>


</li>
<li>
<p>Add this directory to your <code>$PATH</code></p>
</li>
<li>
<p>Run</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@host]$</span> osg-koji setup
</pre></div>


<p>to set up the koji configuration and certificates in <code>~/.osg-koji</code></p>
</li>
</ul>
<h3 id="obtaining-a-login">Obtaining a login<a class="headerlink" href="#obtaining-a-login" title="Permanent link">&para;</a></h3>
<p>You will be using your grid certificate to log in. Email a Koji admin the DN of your certificate, and we will set up a Koji account with the appropriate permissions.</p>
<p>If you are switching certificate providers, you will need to email a Koji admin with your new DN. You will also need to clear your browser cookies and cache for <code>https://koji.opensciencegrid.org</code> before trying to use the Koji web interface again. If your CN has changed, you will not be able to use your old certificate.</p>
<p>Current Koji admins are Mat Selmeci and Carl Edquist.</p>
<h3 id="configuring-certificate-authentication">Configuring certificate authentication<a class="headerlink" href="#configuring-certificate-authentication" title="Permanent link">&para;</a></h3>
<p>You must also configure certificate authentication for the command-line tools on your build host:</p>
<ul>
<li>
<p>Run</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@host]$</span> osg-koji setup
</pre></div>


<p>to set up the appropriate configuration and certificates in <code>~/.osg-koji</code></p>
</li>
</ul>
<p>After this, you will also be able to run koji commands manually by using the <code>osg-koji</code> wrapper script. You might need to rerun <code>osg-koji setup</code> if you renew or change your cert.</p>
<h3 id="creating-a-new-build">Creating a new build<a class="headerlink" href="#creating-a-new-build" title="Permanent link">&para;</a></h3>
<p>We create a new build in Koji from the package's directory in OSG Software subversion.</p>
<p>If a successful build already exists in Koji (regardless of whether it is in the tag you use), you cannot replace the build. Two builds are the same if they have the same NVR (Name-Version-Release). You <em>can</em> do a "scratch" build, which recompiles, but the results are not added to the tag. This is useful for experimenting with koji.</p>
<p>To do a build, execute the following command from within the OSG Software subversion checkout:</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@host]$</span> osg-build koji &lt;PACKAGE NAME&gt;
</pre></div>


<p>To do a scratch build, simply add the <code>--scratch</code> command line flag.</p>
<p>Each invocation of osg-build will ask for the password once or twice; if you get asked more like 20 times, then you may not be running the OSG-patched version of Koji; try switching to the one from the osg-development repository.</p>
<p>When you do a non-scratch build, it will build with the <em>osg-el6</em> and <em>osg-el7</em> targets. This will assign your build the <em>osg-3.4-el6-development</em> and <em>osg-3.4-el7-development</em> tags (and your package will be assigned the <em>osg-el6</em> and <em>osg-el7</em> tags). If successful, your build will end up in the Koji <em>osg-minefield</em> yum repos and will eventually show up in the <em>osg-development</em> yum repos. This is a high latency process.</p>
<h3 id="build-task-results">Build task Results<a class="headerlink" href="#build-task-results" title="Permanent link">&para;</a></h3>
<h4 id="how-to-find-build-results">How to find build results<a class="headerlink" href="#how-to-find-build-results" title="Permanent link">&para;</a></h4>
<p>The most recent build results are always shown on the home page of Koji:</p>
<p><a href="https://koji.opensciencegrid.org/koji/index">https://koji.opensciencegrid.org/koji/index</a></p>
<p>Clicking on a build result brings you to the build information page. A successful build will result in the build page having build logs, RPMs, and a SRPM.</p>
<p>If your build isn't in the recent list, you can use the search box in the upper-right-hand corner. Type the exact package name (or use a wildcard), and it will bring up a list of all builds for that package. You can find your build from there. For example, the "lcmaps" package page is here:</p>
<p><a href="https://koji.opensciencegrid.org/koji/packageinfo?packageID=56">https://koji.opensciencegrid.org/koji/packageinfo?packageID=56</a></p>
<p>And the lcmaps-1.6.6-1.1.osg33.el6 build is here:</p>
<p><a href="https://koji.opensciencegrid.org/koji/buildinfo?buildID=7427">https://koji.opensciencegrid.org/koji/buildinfo?buildID=7427</a></p>
<h4 id="trying-our-your-build">Trying our your build<a class="headerlink" href="#trying-our-your-build" title="Permanent link">&para;</a></h4>
<p>Because it takes a while for your build to get into one of the regular repositories, it's simplest to download your RPM directly (see the previous section on How to find build results), and install it with:</p>
<div class="codehilite"><pre><span></span><span class="gp">[root@host]#</span> yum localinstall &lt;RPM&gt;
</pre></div>


<h4 id="how-to-get-the-resulting-rpm-into-a-repository">How to get the resulting RPM into a repository<a class="headerlink" href="#how-to-get-the-resulting-rpm-into-a-repository" title="Permanent link">&para;</a></h4>
<p>Once a package has been built, it is added to a tag. We then must turn the tag into a yum repository. This is normally done automatically and you do not need to deal with it yourself. Three notes:</p>
<ul>
<li>The kojira daemon creates a repository automatically post-build on the koji-hub host. Eventually, the development repository will be the one hosted by koji-hub.</li>
<li>
<p>The koji-hub repository can be created manually by running</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@host]$</span> osg-koji regen-repo &lt;TAG NAME&gt;
</pre></div>


<p>For example, the tag name for osg-development in 3.4 on el6 is "osg-3.4-el6-development". Likely, you won't need to do this when kojira is working.
-   Repositories are created on external hosts with the <code>mash</code> tool. These are usually triggered by cron jobs, but may be run by hand too. Documentation for running mash is on the TODO list.
-   You can create your own personal repository using <code>mash</code>.</p>
</li>
</ul>
<h4 id="debugging-build-issues">Debugging build issues<a class="headerlink" href="#debugging-build-issues" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Failed build tasks can be seen from the Koji homepage. The logs from the tasks are included. Relevant logs include:</p>
<ul>
<li>
<p><code>root.log</code><br />
    This is the log of mock trying to create an appropriate build root for your RPM. This will invoke yum twice: once to create a generic build root, once for all the dependencies in your BuildRequires. All RPMs in your build root will be logged here. If mock is unable to create the build root, the reason will show up here.</p>
<ul>
<li>
<p>404 Errors</p>
<p>If you see <code>Error downloading packages</code> and <code>HTTP Error 404 - Not Found</code> errors in your <code>root.log</code>,
this commonly indicates that an rpm repo mirror was updated and our build repo is out-of-date.
This can be fixed by regenerating the relevant build repos for your builds.</p>
<p>This is usually something like <code>osg-3.4-el7-build</code> or <code>osg-upcoming-el7-build</code>;
but you can find the exact build tag by clicking the Build Target link for the koji task,
and whatever is listed for the Build Tag is the name of the repo to regen.</p>
<p>Regenerate each repo that failed with 404 errors:</p>
<div class="codehilite"><pre><span></span><span class="gp">$</span> osg-koji regen-repo &lt;BUILD TAG&gt;
</pre></div>


</li>
</ul>
</li>
<li>
<p><code>build.log</code><br />
    The output of the rpmbuild executable. If your package fails to compile, the reason will show up here.</p>
</li>
</ul>
</li>
<li>
<p>One input to the buildArch task is a repository, which is based on a Koji tag. If the repository hasn't been recreated for a dependency you need (for example, when kojira isn't working), you may not have the right RPMs available in your build root.</p>
<ul>
<li>
<p>One common issue is building a chain of dependencies. For example, suppose build B depends on the results of build A. If you build A then build B immediately, B will likely fail. This is because A is not in the repository that B uses. The proper string of events building A, starting the regeneration of the destination and build repo (which should happen in a few minutes of the build A task completing), then submitting build task B.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>if you submit build task B while the build repository task is open, it will not start until the build task has finished.</p>
</div>
</li>
</ul>
</li>
<li>
<p>Other errors</p>
<ul>
<li><code>package &lt;PACKAGE NAME&gt; not in list for tag &lt;TAG&gt;</code><br/>
    This happens when the name of the directory your package is in does not match the name of the package.
    You must rename one or the other and commit your changes before trying again.</li>
</ul>
</li>
</ul>
<h3 id="promoting-builds-from-development-testing">Promoting Builds from Development -&gt; Testing<a class="headerlink" href="#promoting-builds-from-development-testing" title="Permanent link">&para;</a></h3>
<p>Software contributors can promote any package to testing. Members of the security team can promote ca-cert packages to testing.</p>
<p>To promote from development to testing:</p>
<h4 id="using-osg-promote">Using <em>osg-promote</em><a class="headerlink" href="#using-osg-promote" title="Permanent link">&para;</a></h4>
<p>If you want to promote the latest version:</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@host]$</span> osg-promote -r &lt;OSGVER&gt;-testing &lt;PACKAGE NAME&gt;
</pre></div>


<p>&lt;PACKAGE NAME&gt; is the bare package name without version, e.g. <code>gratia-probe</code>.</p>
<p>If you want to promote a specific version:</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@host]$</span> osg-promote -r &lt;OSGVER&gt;-testing &lt;BUILD NAME&gt;
</pre></div>


<p>&lt;BUILD NAME&gt; is a full <code>name-version-revision.disttag</code> such as <code>gratia-probe-1.17.0-2.osg33.el6</code>.</p>
<p>&lt;OSGVER&gt; is the OSG major version that you are promoting for (e.g. <code>3.4</code>).</p>
<p><code>osg-promote</code> will promote both the el6 and el7 builds of a package. After promoting, copy and paste the JIRA code <code>osg-promote</code> produces into the JIRA ticket that you are working on.</p>
<p>For <code>osg-promote</code>, you may omit the <code>.osg34.el6</code> or <code>.osg34.el7</code>; the script will add the appropriate disttag on.</p>
<p>See <a href="../../software/osg-build-tools">OSG Building Tools</a> for full details on <code>osg-promote</code>.</p>
<h3 id="creating-custom-koji-areas">Creating custom koji areas<a class="headerlink" href="#creating-custom-koji-areas" title="Permanent link">&para;</a></h3>
<p>Occasionally you may want to make builds of a package (or packages) which you
do not yet want to go into the main development repos.  In this case, you can
create a set of custom koji tags and build targets for these builds.  We have
a script in our
<a href="https://github.com/opensciencegrid/osg-next-tools/">osg-next-tools</a> repo
called
<a href="https://github.com/opensciencegrid/osg-next-tools/blob/master/koji/new-koji-area">new-koji-area</a>
that facilitates this set up.</p>
<h2 id="further-reading">Further reading<a class="headerlink" href="#further-reading" title="Permanent link">&para;</a></h2>
<ul>
<li>Official Koji documentation: <a href="https://docs.pagure.org/koji/">https://docs.pagure.org/koji/</a></li>
<li>Fedora's koji documentation: <a href="https://fedoraproject.org/wiki/Koji">https://fedoraproject.org/wiki/Koji</a></li>
<li>Fedora's "Using Koji" page: <a href="https://fedoraproject.org/wiki/Using_the_Koji_build_system">https://fedoraproject.org/wiki/Using_the_Koji_build_system</a> Note that some instructions there may not apply to OSG's Koji. For the most part though, they are useful.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../upcoming-to-main/" title="Upcoming to Main" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Upcoming to Main
              </span>
            </div>
          </a>
        
        
          <a href="../create-vo-client/" title="Creating the VO Client Package" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Creating the VO Client Package
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.30f6b8b1.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>